<!-- Incomplete file -->

<!-- CSS -->
<link rel="stylesheet" href="static/css/games_connect-4_stats.css" />
<!-- CSS end -->

<!-- MJS -->
<script type="module" src="static/js/games_connect-4_stats.mjs"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- MJS end -->

<!-- HTML -->
<div id="chart" class="align-center">
	<canvas id="histogram"></canvas>
</div>

<script>
	(async function build() {
		const res = await fetch(`api/connect-four/stats`, {
			method: 'GET',
		});

		const stats = await res.json();

		const labels = Array.from(Array(21), (_, i) => 5 * i);

		const data = {
			labels: labels,
			datasets: [
				{
					label: 'Parties perdues',
					data: Object.values(stats).map((stat) => stat.defeat),
					backgroundColor: 'rgba(255, 99, 132, 0.2)',
					borderColor: 'rgb(255, 99, 132)',
					borderWidth: 1,
				},
				{
					label: 'Égalités',
					data: Object.values(stats).map((stat) => stat.draw),
					backgroundColor: 'rgba(255, 205, 86, 0.2)',
					borderColor: 'rgb(255, 205, 86)',
					borderWidth: 1,
				},
				{
					label: 'Parties gagnées',
					data: Object.values(stats).map((stat) => stat.win),
					backgroundColor: 'rgba(75, 192, 192, 0.2)',
					borderColor: 'rgb(75, 192, 192)',
					borderWidth: 1,
				},
			],
		};

		const config = {
			type: 'bar',
			data: data,
			options: {
				scales: {
					xAxis: {
						title: {
							display: true,
							text: "Difficulté (% de mauvais coups de l'IA)",
						},
						beginAtZero: true,
						stacked: true,
						ticks: {
							callback: function (value, index, ticks) {
								return 5 * value + '%';
							},
						},
					},
					yAxis: {
						beginAtZero: true,
						stacked: true,
					},
				},
			},
		};

		const ctx = document.getElementById('histogram');
		const histogram = new Chart(ctx, config);
	})();
</script>
<!-- HTML end -->
